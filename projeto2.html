<!DOCTYPE html>
<html lang="pt">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="https://cdn.jsdelivr.net/npm/echarts@5/dist/echarts.min.js"></script>
    <title>Variação Anual da Chuva</title>
</head>
<body style="background-color: #0a0a0a; color: white; text-align: center;">

    <h2>Variação Anual da Chuva (mm)</h2>

    <label for="min">Mínimo:</label>
    <input type="number" id="min" value="-1000" step="0.1">
    
    <label for="max">Máximo:</label>
    <input type="number" id="max" value="1000" step="0.1">

    <button onclick="updateChart()">Filtrar</button>

    <div id="chart" style="width: 80%; height: 500px; margin: auto;"></div>

    <script>
        var chart = echarts.init(document.getElementById('chart'));

        var years = ['2014', '2015', '2016', '2017', '2018', '2019', '2020', '2021', '2022', '2023'];
        var variationData = [124.6, -17.9, -91.7, -83.5, 553.3, -266.9, 93.4, -202.8, 550.1, -562.0];

        function getFilteredData(min, max) {
            let filteredYears = [];
            let filteredData = [];
            
            for (let i = 0; i < variationData.length; i++) {
                if (variationData[i] >= min && variationData[i] <= max) {
                    filteredYears.push(years[i]);
                    filteredData.push(variationData[i]);
                }
            }

            return { filteredYears, filteredData };
        }

        function updateChart() {
            var min = parseFloat(document.getElementById('min').value);
            var max = parseFloat(document.getElementById('max').value);

            let { filteredYears, filteredData } = getFilteredData(min, max);

            var option = {
                title: {
                    text: 'Variação Anual da Chuva (mm)',
                    textStyle: {
                        color: '#42f584'
                    }
                },
                backgroundColor: '#0a0a0a',
                tooltip: {
                    trigger: 'axis',
                    axisPointer: { type: 'shadow' }
                },
                xAxis: {
                    type: 'category',
                    data: filteredYears,
                    axisLabel: { color: '#ffffff' }
                },
                yAxis: {
                    type: 'value',
                    name: 'Variação (mm)',
                    nameTextStyle: { color: '#ffffff' },
                    axisLabel: { color: '#ffffff' }
                },
                series: [{
                    name: 'Variação da Chuva',
                    data: filteredData,
                    type: 'bar',
                    itemStyle: { color: '#42f584' }
                }]
            };

            chart.setOption(option);
        }

        // Initialize the chart with all data
        updateChart();
    </script>

</body>
</html>
